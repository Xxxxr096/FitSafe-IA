<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>FitSafe AI - Contact</title>

    <!-- Fonts & Tailwind -->
    <link
      href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600;800&family=Poppins:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='image/logo2.png') }}">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
      body {
        font-family: "Poppins", sans-serif;
        background: radial-gradient(circle at top, #0a0a0a 0%, #111 40%, #1a1a1a 100%);
        color: white;
        overflow-x: hidden;
        position: relative;
      }

      #neural-bg {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 0;
        overflow: hidden;
        pointer-events: none;
      }

      header,
      main,
      footer {
        position: relative;
        z-index: 2;
      }

      .glow {
        text-shadow: 0 0 15px rgba(239, 68, 68, 0.8);
      }

      .neon-input {
        background: rgba(20, 20, 20, 0.9);
        border: 1px solid rgba(239, 68, 68, 0.3);
        color: white;
        transition: all 0.3s ease;
      }
      .neon-input:focus {
        outline: none;
        border-color: #ef4444;
        box-shadow: 0 0 15px rgba(239, 68, 68, 0.6);
      }

      .neon-btn {
        background: linear-gradient(90deg, #ef4444, #ff5555);
        box-shadow: 0 0 15px rgba(239, 68, 68, 0.4);
        transition: all 0.3s ease;
      }
      .neon-btn:hover {
        transform: scale(1.05);
        box-shadow: 0 0 30px rgba(239, 68, 68, 0.8);
      }

      .fade-up {
        opacity: 0;
        transform: translateY(20px);
        transition: opacity 0.8s ease, transform 0.8s ease;
      }
      .fade-up.visible {
        opacity: 1;
        transform: translateY(0);
      }

      .nav-link-glow {
        font-weight: 700;
        background: linear-gradient(90deg, #ef4444, #ff006e, #00ffff, #ef4444);
        background-size: 300%;
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        animation: glow-shift 3s linear infinite;
        text-shadow: 0 0 10px rgba(255,255,255,0.3);
        transition: transform 0.3s ease;
      }
    
      .nav-link-glow:hover {
        transform: scale(1.15);
        text-shadow: 0 0 20px rgba(255,255,255,0.6);
      }
    
      @keyframes glow-shift {
        0% { background-position: 0%; }
        100% { background-position: 300%; }
      }

      button,
      a.bg-red-600,
      a.bg-neutral-700,
      a.text-red-500,
      a.text-neutral-400,
      .bg-red-600,
      .bg-neutral-700 {
        transition: all 0.3s ease-in-out;
      }

      button:hover,
      a.bg-red-600:hover,
      a.bg-neutral-700:hover,
      a.text-red-500:hover,
      a.text-neutral-400:hover,
      .bg-red-600:hover,
      .bg-neutral-700:hover {
        transform: scale(1.08);
        filter: drop-shadow(0 0 8px rgba(239, 68, 68, 0.8));
      }
    </style>
  </head>

  <body class="min-h-screen flex flex-col">
    <!-- ===== FOND NEURONAL ===== -->
    <div id="neural-bg"></div>

    <!-- ===== NAVBAR ===== -->
    <header
      class="fixed top-0 w-full z-50 bg-neutral-900/80 backdrop-blur-md border-b border-neutral-800"
    >
      <div
        class="max-w-7xl mx-auto flex items-center justify-between px-6 py-4"
      >
        <h1 class="text-2xl font-orbitron font-bold text-red-500 tracking-wide">
          FitSafe <span class="nav-link-glow">IA</span>
        </h1>
      
        <nav class="hidden md:flex space-x-8 text-sm font-medium">
          <a href="{{ url_for('home') }}" class="hover:text-red-500 transition">Accueil</a>
          <a href="{{ url_for('dashboard') }}" class="hover:text-red-500 transition">Tableau de bord</a>
          <a href="{{ url_for('advis') }}" class="hover:text-red-500 transition">Conseils</a>
          <a href="{{ url_for('profil') }}" class="hover:text-red-500 transition">Profil</a>
          <a href="{{ url_for('contact') }}" class="text-red-500 font-semibold">Contact</a>
          <a href="{{ url_for('ia') }}" class="nav-link-glow">IA</a>
          <a href="{{ url_for('humain') }}" class="nav-link-glow hover:text-red-400 transition">Humain</a>
          {% if current_user.is_admin %}
          <a href="{{ url_for('admin_dashboard') }}" class="nav-link-glow hover:text-red-400 transition">ðŸ›  Admin</a>
          {% endif %}
        </nav>

        {% if current_user.is_authenticated %}
        <div class="flex items-center gap-4">
          <button id="notif-btn" class="relative text-neutral-400 hover:text-red-500 transition" title="Notifications">
            <i data-lucide="bell"></i>
            <span id="notif-badge" class="hidden absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full w-4 h-4 flex items-center justify-center">3</span>
          </button>
          <a href="{{ url_for('logout') }}" class="text-sm text-neutral-400 hover:text-red-500 transition">Se dÃ©connecter</a>
        </div>
        {% else %}
        <a href="{{ url_for('login') }}" class="text-sm text-neutral-400 hover:text-red-500 transition">Se connecter</a>
        {% endif %}
      </div>
    </header>

    <!-- ===== HERO ===== -->
    <section class="pt-32 pb-10 text-center max-w-3xl mx-auto px-6 fade-up">
      <h2 class="text-5xl md:text-6xl font-extrabold glow mb-4 font-[Orbitron] tracking-wider">
        Contacte ton coach <span class="nav-link-glow">IA</span> ðŸ¤–
      </h2>
      <p class="text-neutral-400 text-lg">
        Une question, une suggestion ou un partenariat ? Lâ€™Ã©quipe FitSafe AI est Ã  ton Ã©coute.
      </p>
    </section>

    <!-- ===== FORMULAIRE DE CONTACT ===== -->
    <main class="max-w-4xl mx-auto px-6 py-10 fade-up">
      <form
        method="POST"
        action="{{ url_for('contact') }}"
        class="bg-neutral-900/80 rounded-2xl p-8 border border-neutral-800 shadow-lg space-y-6"
      >
        {{ form.hidden_tag() }}
        <div>
          <label class="block text-sm text-neutral-400 mb-2">Nom complet</label>
          <input type="text" name="nom" placeholder="Ex : Jean Deltoire" required class="neon-input w-full rounded-lg px-4 py-3"/>
        </div>
        <div>
          <label class="block text-sm text-neutral-400 mb-2">Adresse e-mail</label>
          <input type="email" name="email" placeholder="exemple@email.com" required class="neon-input w-full rounded-lg px-4 py-3"/>
        </div>
        <div>
          <label class="block text-sm text-neutral-400 mb-2">Sujet</label>
          <input type="text" name="sujet" placeholder="Sujet de votre message" required class="neon-input w-full rounded-lg px-4 py-3"/>
        </div>
        <div>
          <label class="block text-sm text-neutral-400 mb-2">Message</label>
          <textarea name="message" rows="5" placeholder="Ã‰cris ton message ici..." required class="neon-input w-full rounded-lg px-4 py-3 resize-none"></textarea>
        </div>
        <button type="submit" class="neon-btn w-full py-3 rounded-full font-semibold text-lg">Envoyer le message</button>
      </form>
    </main>

    <!-- ===== FOOTER ===== -->
    <footer class="text-center text-neutral-500 text-sm py-10 border-t border-neutral-800 bg-neutral-950">
      <p>&copy; 2025 FitSafe AI â€” Tous droits rÃ©servÃ©s.</p>
    </footer>

    <!-- ===== NEURAL BACKGROUND (Three.js) ===== -->
    <script type="importmap">
    {
      "imports": {
        "three": "https://unpkg.com/three@0.162.0/build/three.module.js",
        "three/addons/": "https://unpkg.com/three@0.162.0/examples/jsm/"
      }
    }
    </script>

    <script type="module">
      import * as THREE from 'three';
      import { EffectComposer } from 'three/addons/postprocessing/EffectComposer.js';
      import { RenderPass } from 'three/addons/postprocessing/RenderPass.js';
      import { UnrealBloomPass } from 'three/addons/postprocessing/UnrealBloomPass.js';
      import { ShaderPass } from 'three/addons/postprocessing/ShaderPass.js';
      import { GammaCorrectionShader } from 'three/addons/shaders/GammaCorrectionShader.js';

      let scene, camera, renderer, composer;
      let connections = [];
      const connectionDistance = 4, numNeurons = 120;

      init(); animate();

      function init() {
        scene = new THREE.Scene();
        camera = new THREE.PerspectiveCamera(70, window.innerWidth / window.innerHeight, 0.1, 100);
        camera.position.z = 8;

        renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(window.devicePixelRatio);
        renderer.domElement.style.position = 'fixed';
        renderer.domElement.style.top = 0;
        document.getElementById('neural-bg').appendChild(renderer.domElement);

        scene.add(new THREE.AmbientLight(0xffffff, 0.5));
        createNetwork();

        composer = new EffectComposer(renderer);
        composer.addPass(new RenderPass(scene, camera));
        composer.addPass(new UnrealBloomPass(new THREE.Vector2(window.innerWidth, window.innerHeight), 0.9, 0.5, 0.9));
        composer.addPass(new ShaderPass(GammaCorrectionShader));

        window.addEventListener('resize', onResize);
      }

      function createNetwork() {
        const geo = new THREE.SphereGeometry(0.05, 8, 8);
        const neurons = [];

        for (let i = 0; i < numNeurons; i++) {
          const color = Math.random() > 0.5 ? 0x00ffff : 0xff0044;
          const mat = new THREE.MeshBasicMaterial({ color, transparent: true, opacity: 0.8 });
          const node = new THREE.Mesh(geo, mat);
          node.position.set((Math.random() - 0.5) * 20, (Math.random() - 0.5) * 10, (Math.random() - 0.5) * 15);
          scene.add(node);
          neurons.push(node);
        }

        const material = new THREE.LineBasicMaterial({ color: 0x00ffff, transparent: true, opacity: 0.15 });
        for (let i = 0; i < neurons.length; i++) {
          for (let j = i + 1; j < neurons.length; j++) {
            const a = neurons[i].position, b = neurons[j].position;
            if (a.distanceTo(b) < connectionDistance && Math.random() < 0.3) {
              const lineGeo = new THREE.BufferGeometry().setFromPoints([a, b]);
              const line = new THREE.Line(lineGeo, material.clone());
              line.userData = { baseOpacity: Math.random() * 0.3 + 0.1, speed: Math.random() * 2 + 0.5 };
              scene.add(line);
              connections.push(line);
            }
          }
        }
      }

      function animate() {
        requestAnimationFrame(animate);
        scene.rotation.y += 0.001;
        connections.forEach(l => {
          const t = Math.sin(Date.now() * 0.001 * l.userData.speed) * 0.5 + 0.5;
          l.material.opacity = l.userData.baseOpacity + t * 0.3;
        });
        composer.render();
      }

      function onResize() {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
        composer.setSize(window.innerWidth, window.innerHeight);
      }
    </script>

    <script>
      lucide.createIcons();
      // Apparition progressive des Ã©lÃ©ments
      const fadeElems = document.querySelectorAll(".fade-up");
      const observer = new IntersectionObserver(
        (entries) => entries.forEach((e) => e.isIntersecting && e.target.classList.add("visible")),
        { threshold: 0.2 }
      );
      fadeElems.forEach((el) => observer.observe(el));
    </script>
  </body>
</html>
