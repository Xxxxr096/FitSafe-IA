<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>FitSafe AI Ton coach IA intelligent üß¨</title>

  <!-- Fonts & Tailwind -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&family=Orbitron:wght@700;900&display=swap" rel="stylesheet">
  <link rel="icon" type="image/png" href="{{ url_for('static', filename='image/logo2.png') }}">

  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest"></script>

  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background: radial-gradient(circle at top, #0a0a0a 0%, #111 40%, #1a1a1a 100%);
      color: white;
      overflow-x: hidden;
    }

    /* Barre de chargement IA */
    .progress-bar {
      position: fixed;
      top: 0;
      left: 0;
      height: 3px;
      width: 0%;
      background: linear-gradient(90deg, #ef4444, #ff6b6b);
      box-shadow: 0 0 10px #ef4444;
      animation: load-bar 4s infinite;
      z-index: 50;
    }

    @keyframes load-bar {
      0% { width: 0%; }
      50% { width: 80%; }
      100% { width: 100%; }
    }

    /* Hero animation */
    .hero {
      position: relative;
      background: linear-gradient(rgba(10,10,10,0.9), rgba(10,10,10,0.9)),
                  url("https://images.unsplash.com/photo-1579758629938-03607ccdbaba?auto=format&fit=crop&w=1600&q=80") center/cover no-repeat;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      overflow: hidden;
    }

    .hero::before {
      content: '';
      position: absolute;
      top: 0; left: 0;
      width: 100%;
      height: 100%;
      background: radial-gradient(circle at center, rgba(239,68,68,0.05), transparent 70%);
      z-index: 1;
    }

    .hero-content {
      position: relative;
      z-index: 2;
      animation: fadeInUp 2s ease-in-out;
    }

    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(40px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .glow {
      text-shadow: 0 0 15px rgba(239,68,68,0.8);
    }

    /* Cards */
    .card {
      background: rgba(30,30,30,0.9);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 1rem;
      transition: transform 0.3s, box-shadow 0.3s;
    }

    .card:hover {
      transform: scale(1.05);
      box-shadow: 0 0 20px rgba(239,68,68,0.3);
    }

    /* Section fade */
    .fade-up {
      opacity: 0;
      transform: translateY(40px);
      transition: all 1s ease;
    }

    .fade-up.visible {
      opacity: 1;
      transform: translateY(0);
    }

    /* Footer glow */
    footer:hover h1 {
      color: #ef4444;
      text-shadow: 0 0 20px #ef4444;
    }
    .nav-link-neon {
      color: #ef4444;
      font-weight: 600;
      text-shadow: 0 0 8px rgba(239, 68, 68, 0.8),
                   0 0 20px rgba(239, 68, 68, 0.4);
      transition: all 0.3s ease-in-out;
      position: relative;
    }
    
    .nav-link-neon:hover {
      color: #fff;
      text-shadow: 0 0 20px rgba(239, 68, 68, 1),
                   0 0 40px rgba(255, 80, 80, 0.8),
                   0 0 60px rgba(255, 100, 100, 0.6);
      transform: scale(1.1);
    }
    /* ---- Effet multicolore IA ---- */
  .nav-link-glow {
    font-weight: 700;
    background: linear-gradient(90deg, #ef4444, #ff006e, #00ffff, #ef4444);
    background-size: 300%;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    animation: glow-shift 3s linear infinite;
    text-shadow: 0 0 10px rgba(255,255,255,0.3);
    transition: transform 0.3s ease;
  }

  .nav-link-glow:hover {
    transform: scale(1.15);
    text-shadow: 0 0 20px rgba(255,255,255,0.6);
  }

  @keyframes glow-shift {
    0% { background-position: 0%; }
    100% { background-position: 300%; }
  }
  /* ---- Effet de survol n√©on universel pour tous les boutons et liens importants ---- */
  button,
  a.bg-red-600,
  a.bg-neutral-700,
  a.text-red-500,
  a.text-neutral-400,
  .bg-red-600,
  .bg-neutral-700 {
    transition: all 0.3s ease-in-out;
  }

  button:hover,
  a.bg-red-600:hover,
  a.bg-neutral-700:hover,
  a.text-red-500:hover,
  a.text-neutral-400:hover,
  .bg-red-600:hover,
  .bg-neutral-700:hover {
    transform: scale(1.08);
    filter: drop-shadow(0 0 8px rgba(239, 68, 68, 0.8));
  }


    

  </style>
</head>

<body class="bg-neutral-950 text-white">

  <!-- Barre de chargement IA -->
  <div class="progress-bar"></div>

  <!-- ===== NAVBAR ===== -->
  <header class="fixed top-0 w-full z-40 bg-neutral-900/80 backdrop-blur-md border-b border-neutral-800">
    <div class="max-w-7xl mx-auto flex items-center justify-between px-6 py-4">
      <h1 class="text-2xl font-orbitron font-bold text-red-500 tracking-wide">
        FitSafe <span class="nav-link-glow">IA</span>
      </h1>
      
      <nav class="hidden md:flex space-x-8 text-sm font-medium">
        <a href="{{ url_for('home') }}" class="text-red-500 font-semibold">Accueil</a>
        <a href="{{ url_for('dashboard') }}" class="hover:text-red-500 transition">Tableau de bord</a>
        <a href="{{ url_for('advis') }}" class="hover:text-red-500 transition">Conseils</a>
        <a href="{{ url_for('profil') }}" class="hover:text-red-500 transition">Profil</a>
        <a href="{{ url_for('contact') }}" class="hover:text-red-500 transition">Contact</a>
        <a href="{{ url_for('ia') }}" class="nav-link-glow">IA</a>

      </nav>
      {% if current_user.is_authenticated %}
          <div class="flex items-center gap-4">
            <!-- Ic√¥ne Notifications -->
            <button id="notif-btn" class="relative text-neutral-400 hover:text-red-500 transition" title="Notifications">
              <i data-lucide="bell"></i>
              <!-- Badge de notifications (cach√© par d√©faut) -->
              <span id="notif-badge" class="hidden absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full w-4 h-4 flex items-center justify-center">3</span>
            </button>
            <!-- Bouton D√©connexion -->
            <a href="{{ url_for('logout') }}" class="text-sm text-neutral-400 hover:text-red-500 transition">Se d√©connecter</a>
          </div>
      {% else %}
          <a href="{{ url_for('login') }}" class="text-sm text-neutral-400 hover:text-red-500 transition">Se connecter</a>
      {% endif %}

    </div>
  </header>

  <!-- ===== HERO ===== -->
  <section class="hero">
    <div class="hero-content px-6 pt-24">
      <p class="text-red-400 mb-2 tracking-widest text-sm uppercase">Analyzing your potential...</p>
      <h2 class="text-4xl md:text-6xl font-orbitron font-extrabold mb-4 glow">
        Ton coach <span class="nav-link-glow">IA</span> pour t‚Äôentra√Æner <br /> plus intelligemment üß¨
      </h2>
      <p class="text-neutral-300 max-w-xl mx-auto mb-8">
        FitSafe AI combine la puissance de l‚Äôintelligence artificielle et la science du mouvement pour t‚Äôaider √† atteindre tes objectifs sans blessures.
      </p>
      <a href="{{ url_for('dashboard') }}" class="bg-red-600 hover:bg-red-700 px-8 py-3 rounded-full text-lg font-semibold shadow-lg transition-all hover:shadow-red-500/40">
        Commencer maintenant
      </a>
    </div>
  </section>

  <!-- ===== SECTION 1 - Pourquoi FitSafe AI ===== -->
  <section class="py-24 bg-neutral-950">
    <div class="max-w-6xl mx-auto text-center px-6 fade-up">
      <h3 class="text-3xl font-orbitron font-bold mb-12 glow">Pourquoi FitSafe <span class="nav-link-glow">IA</span>  ?</h3>
      <div class="grid md:grid-cols-4 gap-8">
        <div class="card p-8">
          <i data-lucide="activity" class="w-10 h-10 text-red-500 mx-auto mb-4"></i>
          <h4 class="font-semibold mb-2">Suivi intelligent</h4>
          <p class="text-neutral-400 text-sm">Analyse pr√©cise de tes s√©ances et de ta progression.</p>
        </div>
        <div class="card p-8">
          <i data-lucide="cpu" class="w-10 h-10 text-red-500 mx-auto mb-4"></i>
          <h4 class="font-semibold mb-2">IA pr√©dictive</h4>
          <p class="text-neutral-400 text-sm">Anticipe le risque de blessure avant qu‚Äôil ne survienne.</p>
        </div>
        <div class="card p-8">
          <i data-lucide="dumbbell" class="w-10 h-10 text-red-500 mx-auto mb-4"></i>
          <h4 class="font-semibold mb-2">Coaching personnalis√©</h4>
          <p class="text-neutral-400 text-sm">Des conseils adapt√©s √† ton profil et √† ton rythme.</p>
        </div>
        <div class="card p-8">
          <i data-lucide="line-chart" class="w-10 h-10 text-red-500 mx-auto mb-4"></i>
          <h4 class="font-semibold mb-2">Plans adaptatifs</h4>
          <p class="text-neutral-400 text-sm">Des entra√Ænements qui √©voluent avec toi, automatiquement.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- ===== SECTION 2 - Aper√ßu Dashboard ===== -->
  <section class="py-24 bg-gradient-to-b from-neutral-950 to-neutral-900 text-center fade-up">
    <h3 class="text-3xl font-orbitron font-bold mb-10 glow">Ton tableau de bord <span class="nav-link-glow">IA</span> </h3>
    <p class="text-neutral-400 max-w-xl mx-auto mb-12">Visualise ta performance, ton score de forme et ton √©volution en temps r√©el gr√¢ce √† l‚Äôintelligence artificielle FitSafe.</p>
    <canvas id="dashboardCanvas" class="mx-auto rounded-2xl w-3/4 max-w-4xl"></canvas>

    <script>
      const canvas = document.getElementById('dashboardCanvas');
      const ctx = canvas.getContext('2d');

      function resizeCanvas() {
        canvas.width = window.innerWidth * 0.7;
        canvas.height = 400;
      }
      resizeCanvas();
      window.addEventListener('resize', resizeCanvas);

      const particles = Array.from({ length: 60 }, () => ({
        x: Math.random() * canvas.width,
        y: Math.random() * canvas.height,
        vx: (Math.random() - 0.5) * 0.7,
        vy: (Math.random() - 0.5) * 0.7
      }));

      function animate() {
        ctx.fillStyle = "rgba(10,10,10,0.15)";
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        for (let i = 0; i < particles.length; i++) {
          const p = particles[i];
          p.x += p.vx;
          p.y += p.vy;
          if (p.x < 0 || p.x > canvas.width) p.vx *= -1;
          if (p.y < 0 || p.y > canvas.height) p.vy *= -1;

          ctx.beginPath();
          ctx.arc(p.x, p.y, 2, 0, Math.PI * 2);
          ctx.fillStyle = "rgba(239,68,68,0.8)";
          ctx.fill();

          for (let j = i + 1; j < particles.length; j++) {
            const q = particles[j];
            const dist = Math.hypot(p.x - q.x, p.y - q.y);
            if (dist < 120) {
              ctx.beginPath();
              ctx.moveTo(p.x, p.y);
              ctx.lineTo(q.x, q.y);
              ctx.strokeStyle = `rgba(239,68,68,${1 - dist / 120})`;
              ctx.lineWidth = 0.6;
              ctx.stroke();
            }
          }
        }
        requestAnimationFrame(animate);
      }

      animate();
    </script>


  </section>

  <!-- ===== SECTION 3 - L'IA en action ===== -->
  <section class="py-24 bg-neutral-950 text-center fade-up">
    <h3 class="text-3xl font-orbitron font-bold mb-6 glow">L‚ÄôIA en action ü§ñ</h3>
    <p class="text-neutral-400 max-w-xl mx-auto mb-10">FitSafe AI apprend de chaque s√©ance pour perfectionner ton plan d‚Äôentra√Ænement et optimiser tes performances.</p>
    <a href="{{ url_for('dashboard') }}" class="bg-red-600 hover:bg-red-700 px-8 py-3 rounded-full font-semibold transition-all shadow-lg hover:shadow-red-500/40">En savoir plus</a>
  </section>

  <!-- ===== SECTION 4 - Mobile Ready ===== -->

  <!-- ===== FOOTER ===== -->
  <footer class="bg-neutral-950 border-t border-neutral-800 py-10 text-center">
    <h1 class="text-2xl font-orbitron font-bold mb-2 text-white transition">FitSafe <span class="nav-link-glow">IA</span></h1>
    
    <p class="text-neutral-500 text-sm mt-4">
      ¬© 2025 FitSafe AI ‚Äî 
      <a href="{{ url_for('privacy') }}" class="text-red-400 hover:text-red-500 underline">Politique de confidentialit√©</a>
    </p>
    
    <div class="flex justify-center space-x-6 mt-6">
      <a href="#" class="text-neutral-400 hover:text-red-500 transition transform hover:scale-125 hover:drop-shadow-[0_0_8px_rgba(239,68,68,0.8)]">
        <i data-lucide="instagram"></i>
      </a>
      <a href="#" class="text-neutral-400 hover:text-red-500 transition transform hover:scale-125 hover:drop-shadow-[0_0_8px_rgba(239,68,68,0.8)]">
        <i data-lucide="linkedin"></i>
      </a>
      <a href="#" class="text-neutral-400 hover:text-red-500 transition transform hover:scale-125 hover:drop-shadow-[0_0_8px_rgba(239,68,68,0.8)]">
        <i data-lucide="github"></i>
      </a>
    </div>
  </footer>
  

  <script>
    lucide.createIcons();

    // Animation au scroll (fade-up)
    const fadeEls = document.querySelectorAll('.fade-up');
    const obs = new IntersectionObserver(entries => {
      entries.forEach(entry => {
        if (entry.isIntersecting) entry.target.classList.add('visible');
      });
    }, { threshold: 0.2 });
    fadeEls.forEach(el => obs.observe(el));
  </script>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      // üö´ Liste des pages o√π la g√©olocalisation NE DOIT PAS s‚Äôex√©cuter
      const skipPages = ["/privacy", "/contact", "/login", "/register"];
      if (skipPages.includes(window.location.pathname)) {
        console.log("üåç G√©olocalisation ignor√©e sur cette page :", window.location.pathname);
        return;
      }
    
      // ‚úÖ Si on est sur une page autoris√©e
      if ("geolocation" in navigator) {
        navigator.geolocation.getCurrentPosition(async (position) => {
          const lat = position.coords.latitude;
          const lon = position.coords.longitude;
    
          console.log(`üìç Position d√©tect√©e : ${lat}, ${lon}`);
    
          try {
            const response = await fetch("/update_location", {
              method: "POST",
              headers: {
                "Content-Type": "application/json",
                "X-CSRFToken": "{{ csrf_token() }}"
              },
              body: JSON.stringify({ lat, lon })
            });
    
            if (response.ok) {
              console.log("‚úÖ Position envoy√©e au serveur avec succ√®s !");
            } else {
              console.warn("‚ö†Ô∏è Erreur lors de la mise √† jour :", response.status);
            }
          } catch (error) {
            console.warn("‚ùå Erreur de connexion serveur :", error);
          }
        }, (error) => {
          console.warn("‚ö†Ô∏è Erreur g√©olocalisation :", error.message);
        });
      } else {
        console.warn("üö´ G√©olocalisation non support√©e par ce navigateur.");
      }
    });
    </script>
    
    
    
    <!-- ===== Cookie Consent Banner ===== -->
    <div id="cookie-banner" class="fixed bottom-5 left-1/2 transform -translate-x-1/2 bg-neutral-900 border border-neutral-700 rounded-xl p-4 md:p-5 shadow-lg max-w-md text-center z-50 hidden">
      <p class="text-neutral-300 text-sm mb-3">
        üç™ Nous utilisons des cookies pour am√©liorer ton exp√©rience et assurer le bon fonctionnement de FitSafe IA.
        <a href="{{ url_for('privacy') }}" class="text-red-400 underline hover:text-red-500">En savoir plus</a>.
      </p>
      <div class="flex justify-center gap-3">
        <button id="accept-cookies" class="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg text-sm font-semibold">
          Accepter
        </button>
        <button id="reject-cookies" class="bg-neutral-700 hover:bg-neutral-600 text-neutral-200 px-4 py-2 rounded-lg text-sm">
          Refuser
        </button>
      </div>
    </div>

    <script>
    document.addEventListener("DOMContentLoaded", () => {
      const banner = document.getElementById("cookie-banner");
      const accepted = localStorage.getItem("cookiesAccepted");

      if (!accepted) {
        banner.classList.remove("hidden");
      }

      document.getElementById("accept-cookies").addEventListener("click", () => {
        localStorage.setItem("cookiesAccepted", "true");
        banner.classList.add("hidden");
      });

      document.getElementById("reject-cookies").addEventListener("click", () => {
        localStorage.setItem("cookiesAccepted", "false");
        banner.classList.add("hidden");
      });
    });
    </script>

</body>
</html>

